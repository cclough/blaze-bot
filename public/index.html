<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Blaze Test</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://js.stripe.com/v3/"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <link rel="stylesheet" href="styles.css" />
  <script src="app.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@400;700;900&family=Rajdhani:wght@400;600;700&family=Russo+One&family=Audiowide&family=Black+Ops+One&family=Bungee&family=Monoton&family=Wallpoet&family=Electrolize&family=Share+Tech+Mono&family=Iceberg&family=Faster+One&family=Megrim&family=Jura:wght@300;400;500;600;700&family=Saira+Stencil+One&family=Turret+Road:wght@200;300;400;500;700;800&family=Michroma&family=Syncopate:wght@400;700&family=Teko:wght@300;400;500;600;700&family=Squada+One&family=Aldrich&family=Quantico:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet" />

</head>
<body>


  <div class="background-container" id="background">
    <div class="cyber-grid"></div>
    <div class="glitch-overlay"></div>
    <!-- White Blood Cells will be dynamically generated by JavaScript -->
  </div>



  <div class="content-overlay" id="modal">
    <div class="content-card">
        <div class="digital-noise"></div>
        <div class="content-scroll">
            <div class="blaze-logo">
                <span class="blaze-letter b">b</span>
                <span class="blaze-letter l">l</span>
                <span class="blaze-letter a">a</span>
                <span class="blaze-letter z">z</span>
                <span class="blaze-letter e">e</span>
            </div>
            <h2 data-text="Decode Your Immune Intelligence">Understand your immune system</h2>
            
            <p>Right now all you get in standard blood tests e.g. CRP, which is insensitive and non-specific. Behind these numbers is rich complexity.</p>
            
            <p>We give you insight into what your incredible immune system is doing.</p>
            
            <h3>How It Works - 4 Simple Steps</h3>
            <div class="steps-container">
                <div class="step-item">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>Sign Up & Payment</h4>
                        <p>Book your test through our secure platform</p>
                    </div>
                </div>
                <div class="step-connector"></div>
                <div class="step-item">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>Visit Our Test Centre</h4>
                        <p>Come to our test centre in SF and get a blood draw taken</p>
                    </div>
                </div>
                <div class="step-connector"></div>
                <div class="step-item">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>Receive Results</h4>
                        <p>A week later - receive your comprehensive results</p>
                    </div>
                </div>
                <div class="step-connector"></div>
                <div class="step-item">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h4>Track Over Time</h4>
                        <p>Repeat any time to monitor your immune health</p>
                    </div>
                </div>
            </div>
            
            <h3>Analysis</h3>
            <p>We analyze <strong>48 different immune signaling molecules</strong> in your blood (e.g. cytokines), comparing them vs population averages:</p>
            
            <div class="chart-preview-container">
                <div class="chart-title">Sample Cytokine Analysis (First 8 Markers)</div>
                <canvas id="sampleCytokineChart"></canvas>
                <div class="chart-fade"></div>
            </div>
            
            <p>We also explain what <strong>inflammation patterns</strong> we see in your profile:</p>
            
            <div class="chart-preview-container">
                <div class="chart-title">Inflammation Pattern Analysis</div>
                <canvas id="samplePatternChart"></canvas>
            </div>
            
            <p>This analysis gives you a deeper understanding of your immune system's current state, so you are better informed on your health journey.</p>
        </div>
        <div class="button-container">
          <!-- onclick="buyTest()" -->
            <button id="pay-button">
                <span>Book Test</span>
            </button>
        </div>

        <div class="box"></div>
      
    </div>
  </div>

  <div id="checkout" style="display: none;  width: 100vw; height: 100vh; top: 0; left: 0; z-index: 9999;"></div>

  


  <script>
    Telegram.WebApp.ready();
    // const btn = Telegram.WebApp.MainButton;
    const btn2 = document.getElementById('pay-button');
    const boxElement = document.querySelector('.box');
    const checkoutElement = document.getElementById('checkout');
    const modalElement = document.getElementById('modal');
    const backgroundElement = document.getElementById('background');
    // const checkoutElement = document.getElementById('content-overlay');

    let stripe; // Don't initialize yet

    // btn.setText('Pay $1').show();

    // btn.onClick(async () => {
    btn2.addEventListener('click', async () => {
      // Add loading state to button
      btn2.classList.add('loading');
      
      // Redirect to signup page
      window.location.href = 'signup.html';
    });
  </script>

  <script>
    // Initialize sample charts when page loads
    document.addEventListener('DOMContentLoaded', function() {
      // Sample Cytokine Chart (First 8 markers)
      const cytokineCtx = document.getElementById('sampleCytokineChart');
      if (cytokineCtx) {
        const cytokineChart = new Chart(cytokineCtx, {
          type: 'bar',
          data: {
            labels: ['IL-1β', 'IL-6', 'IL-8', 'IL-10', 'TNF-α', 'IFN-γ', 'IL-12', 'IL-17'],
            datasets: [
              {
                label: 'Your Values',
                data: [85, 120, 95, 75, 110, 88, 92, 78],
                backgroundColor: [
                  'rgba(255, 100, 100, 0.7)', // IL-1β elevated
                  'rgba(255, 100, 100, 0.7)', // IL-6 elevated
                  'rgba(100, 255, 100, 0.7)', // IL-8 normal
                  'rgba(100, 255, 100, 0.7)', // IL-10 normal
                  'rgba(255, 100, 100, 0.7)', // TNF-α elevated
                  'rgba(100, 255, 100, 0.7)', // IFN-γ normal
                  'rgba(100, 255, 100, 0.7)', // IL-12 normal
                  'rgba(100, 255, 100, 0.7)'  // IL-17 normal
                ],
                borderColor: [
                  'rgba(255, 100, 100, 1)',
                  'rgba(255, 100, 100, 1)',
                  'rgba(100, 255, 100, 1)',
                  'rgba(100, 255, 100, 1)',
                  'rgba(255, 100, 100, 1)',
                  'rgba(100, 255, 100, 1)',
                  'rgba(100, 255, 100, 1)',
                  'rgba(100, 255, 100, 1)'
                ],
                borderWidth: 1
              },
              {
                label: 'Healthy Range',
                data: [100, 100, 100, 100, 100, 100, 100, 100],
                type: 'line',
                borderColor: 'rgba(255, 170, 0, 0.8)',
                borderDash: [5, 5],
                borderWidth: 2,
                pointRadius: 0,
                fill: false
              }
            ]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            indexAxis: 'y',
            plugins: {
              legend: {
                display: false
              }
            },
            scales: {
              x: {
                beginAtZero: true,
                max: 150,
                grid: {
                  color: 'rgba(255, 140, 0, 0.1)'
                },
                ticks: {
                  color: 'rgba(255, 170, 0, 0.7)',
                  font: {
                    family: 'Share Tech Mono',
                    size: 10
                  }
                }
              },
              y: {
                grid: {
                  color: 'rgba(255, 140, 0, 0.1)'
                },
                ticks: {
                  color: 'rgba(255, 170, 0, 0.7)',
                  font: {
                    family: 'Share Tech Mono',
                    size: 10
                  }
                }
              }
            }
          }
        });
      }

      // Sample Pattern Chart (Radar)
      const patternCtx = document.getElementById('samplePatternChart');
      if (patternCtx) {
        const patternChart = new Chart(patternCtx, {
          type: 'radar',
          data: {
            labels: ['Viral', 'Bacterial', 'Allergy', 'Sleep-Deprived', 'Over-Training', 'Autoimmune'],
            datasets: [{
              label: 'Pattern Match %',
              data: [78, 45, 62, 89, 52, 41],
              backgroundColor: 'rgba(255, 140, 0, 0.2)',
              borderColor: '#ff8c00',
              borderWidth: 2,
              pointBackgroundColor: '#ff8c00',
              pointBorderColor: '#fff',
              pointHoverBackgroundColor: '#fff',
              pointHoverBorderColor: '#ff8c00'
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: false
              }
            },
            scales: {
              r: {
                beginAtZero: true,
                max: 100,
                ticks: {
                  color: 'rgba(255, 170, 0, 0.5)',
                  backdropColor: 'transparent',
                  font: {
                    family: 'Share Tech Mono',
                    size: 10
                  }
                },
                grid: {
                  color: 'rgba(255, 140, 0, 0.2)'
                },
                pointLabels: {
                  color: '#ffaa00',
                  font: {
                    family: 'Rajdhani',
                    size: 11,
                    weight: '600'
                  }
                }
              }
            }
          }
        });
      }
    });
  </script>
</body>
</html>